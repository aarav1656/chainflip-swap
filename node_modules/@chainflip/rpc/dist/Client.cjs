"use strict";Object.defineProperty(exports, "__esModule", {value: true});// src/Client.ts
var _commoncjs = require('./common.cjs');
var _assertion = require('@chainflip/utils/assertion');
var Client = class {
  constructor(url) {
    this.url = url;
  }
  getRequestId() {
    return "1";
  }
  formatRequest(method, params) {
    return { jsonrpc: "2.0", id: this.getRequestId(), method, params };
  }
  async sendRequest(method, ...params) {
    const response = await this.send(this.formatRequest(method, params));
    if (!response.success)
      throw response.error;
    const parseResult = _commoncjs.rpcResponse.safeParse(response.result);
    _assertion.assert.call(void 0, parseResult.success, "Malformed RPC response received");
    if ("error" in parseResult.data) {
      throw new Error(
        `RPC error [${parseResult.data.error.code}]: ${parseResult.data.error.message}`
      );
    }
    return _commoncjs.rpcResult[method].parse(parseResult.data.result);
  }
  methods() {
    return Object.keys(_commoncjs.rpcResult).sort();
  }
};


exports.default = Client;
